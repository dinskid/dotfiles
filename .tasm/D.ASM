DATA SEGMENT
N DB 22
LOOKUP DB '0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'
HEX DB 3 DUP('$')
BINARY DB 33 DUP('$')
GRAY DB 33 DUP('$')
DATA ENDS

CONVERT MACRO ANDAMT, SHAMT ; di: address of string, dl: n
	LOCAL MOO, ENDMOO
	XOR DH, DH
	MOO:
		CMP DX, 0
		JZ ENDMOO
		MOV SI, DX
		AND SI, ANDAMT
		ADD SI, OFFSET LOOKUP
		MOVSB
		SHR DX, SHAMT
		JMP MOO
	ENDMOO:

ENDM

CODE SEGMENT
ASSUME CS:CODE, DS:DATA, ES:DATA, SS:DATA

START:
MOV AX, DATA
MOV DS, AX
MOV ES, AX
MOV SS, AX

LEA DI, BINARY
MOV DL, N
CONVERT 1, 1
INT 3

MOV DL, N
LEA DI, HEX
CONVERT 15, 4
INT 3

LEA DI, GRAY
MOV DL, N
MOV DH, N
SHR DH, 1
XOR DL, DH
CONVERT 1, 1
INT 3

MOV AH, 4CH
INT 21H

CODE ENDS
END START

