DATA SEGMENT
FACTORIAL DB 30 DUP ('$')
N DB ?
MSG DB 0AH, 0DH, "SORRY, CAN'T PROCESS THIS$"
DATA ENDS

CODE SEGMENT
ASSUME CS: CODE, DS:DATA

PROC ENDL
MOV AH, 02H
MOV DL, 0AH
INT 21H
MOV AH, 02H
MOV DL, 0DH
INT 21H
RET
ENDL ENDP

NUM_TO_STR PROC
; ARG IS PASSED THRU DX
MOV AX, DX
XOR DX, DX
XOR CX, CX ; TO KNOW THE COUNT OF 
; IDEA IS TO PUSH TO STACK AND POP OFF TILL REQD
MOV BX, 10 ; TO GET THE NUMBER
MOO:
	CMP AX, 0
	JE LEXIT
	INC CX ; TO KNOW HOW MUCH TO POP OFF
	DIV BX ; AX/=10
	PUSH DX ; PUSH THE REMAINDER TO STACK
	XOR DX, DX
	JMP MOO
LEXIT: ; POP OFF CX TIMES ONTO THE VARIABLE
	MOV SI, OFFSET FACTORIAL
	POP_OFF:
		POP AX
		ADD AL, 30H
		MOV [FACTORIAL+SI], AL ; POP [FACTORIAL+SI]
		INC SI
		LOOP POP_OFF
RET
NUM_TO_STR ENDP

START:
	MOV AX, DATA
	MOV DS, AX
	MOV AH, 01H
	INT 21H
	SUB AL, 30H
	CMP AL, 9
	JGE ERROR
	MOV [N], AL
	CBW
	MOV CX, AX
	MOV AX, 1
	CMP CX, 0
	JE LOOP_END
	FACT:
		MUL CX
		LOOP FACT

LOOP_END:
	MOV DX, AX
	CALL NUM_TO_STR

CALL ENDL
MOV DX, OFFSET FACTORIAL
MOV AH, 09H
INT 21H

EXIT:
	MOV AH, 4CH
	INT 21H

ERROR:
	LEA DX, MSG
	MOV AH, 09H
	INT 21H
	JMP EXIT

CODE ENDS
END START

